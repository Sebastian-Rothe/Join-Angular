<section class="contacts-container">
  <section class="contact-list-section" [class.mobile-hidden]="isMobileView && isContactDetailsVisible">
    <div class="button-container">
      <button class="new-contact-button" (click)="openNewContactDialog()">
        Add new contact 
        <mat-icon>person_add</mat-icon>
      </button>
    </div>

    <div class="contacts-list">
      <div *ngFor="let letter of groupedContacts | keyvalue" class="contact-group">
        <div class="letter-divider">{{letter.key}}</div>
        <div *ngFor="let contact of letter.value" 
             class="contact-item"
             [class.selected]="selectedContact?.uid === contact.uid"
             (click)="onContactSelect(contact)">
          <div class="contact-avatar" [style.background-color]="contact.iconColor">
            <img *ngIf="contact.profilePicture" [src]="contact.profilePicture" alt="Profile picture">
            <span *ngIf="!contact.profilePicture">{{ contact.initials }}</span>
          </div>
          <div class="contact-info">
            <div class="contact-name">{{ contact.name }}</div>
            <div class="contact-email">{{ contact.email }}</div>
          </div>
        </div>
      </div>
    </div>

    <div class="mobile-add-button" (click)="openNewContactDialog()">
      <mat-icon class="mobile-icon">person_add</mat-icon>
    </div>
  </section>

  <section class="contact-details-section" 
           [class.mobile-visible]="isMobileView && isContactDetailsVisible"
           [class.slide-in]="selectedContact">
    <div class="contact-heading">
      <div class="title-row">
        <span class="contacts-title">Contacts</span>
        <span *ngIf="isMobileView" class="back-button" (click)="onBackToList()">
          <mat-icon>arrow_back</mat-icon>
        </span>
      </div>
      <div class="subtitle-row">
        <div class="divider"></div>
        <span class="better-text">Better with a team</span>
      </div>
    </div>

    <div class="contact-content" 
         [class.sliding-in]="isSlideIn"
         [class.sliding-out]="isSlideOut">
      <app-contact-details 
        [contact]="selectedContact"
        [isMobileView]="isMobileView"
        (contactUpdated)="loadContacts()"
        (contactDeleted)="onContactDeleted()">
      </app-contact-details>
    </div>
  </section>
</section>